$_  = $$ / $$ #  1
@_  = $_ + $_ #  2
$-  = $_ - @_ # -1
$-_ = $_ - $_ #  0 

# factorial
$__ = -> _ {
  _ < @_ ? $_ : _ * $__[_ - $_]
}

# Array#size
$___ = -> _ {
  $. = $-_
  (@__ = -> {
    $. += $_
    (_ = _[$_..$-]) == [] ? $. : @__[]
  })[]
}

# map
$____ = -> _, __ {
  @___ = $___[_]
  $. = $-_
  (@____ = -> {
    _[$.] = __[_[$.]]
    ($. += $_) == @___ ? _ : @____[]
  })[]
}

# triangle
$_____ = -> _ {
  $____[[*$-_.._], -> __ { $__[_] / ($__[__] * $__[_ - __]) }]
}

# Array#each
___ = -> _, __ {
  ____ = $___[_]
  _____ = $-_
  (______ = -> {
    __[_[_____]]
    (_____ += $_) == ____ ? _ : ______[]
  })[]
}

# Array#with_index
@_____ = -> _ {
  ___ = $___[_]
  $. = $-_
  __ = []
  (____ = -> {
    __ << [_[$.], $.]
    ($. += $_) == ___ ? __ : ____[]
  })[]
}

$. = @_ ** (@_ * @_) - @_
___[@_____[$_____[$. - $_]], -> _ {
  $> << $____[$_____[_[$_]], -> __ { _[$-_] * __ }] * ' ' <<
  ('' << @_ * @_ * @_ + @_)}] 
