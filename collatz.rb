$. = $$ / $$ # 1
$_ = $. + $. # 2
@_ = $. + $_ # 3

@__ = []

__ = -> _ {
  @__ << _
  _ == $. ? @__ : __[_ % $_ < $. ? _ / $_ : _ * @_ + $.]
}

$> << __[@_] << ('' << @_ ** $_ + $.) # Call with 3 and print with a newline.
