$. = $$ / $$ # 1
$_ = $. + $. # 2
$- = $_ + $. # 3

@_ = []

(__ = -> _ {
  @_ << _
  _ == $. ? @_ : __[_ % $_ < $. ? _ / $_ : _ * $- + $.]
})

$> << __[$-] # Call with 3.
