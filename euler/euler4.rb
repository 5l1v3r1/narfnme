$. = $$ / $$ # 1
$_ = $. + $. # 2
@_ = $. + $_ # 3
$- = $_ + @_ # 5

$-_ = $_ * $- # 10
$__ = @_ * @_ * $-_ * $-_ # 900
@__ = $-_ * $-_ * $-_ # 1000

$_____ = $. - $. # 0, the maximum palindromic product

$___ = $__       # x = 900
($____ = -> {    # x loop
  @_____ = $__   # y = 900
  (@____ = -> {  # y loop
    @_____ += $. # Increment y.
    $______ = $___ * @_____ # product
    @______ = "#{$______}"  # stringify
    $______ > $_____ &&     # If product is greater than max
      @______[$. - $.] == @______[$_ + @_] && # and [0] == [5]
      @______[$.] == @______[$_ + $_] &&      # and [1] == [4]
      @______[$_] == @______[@_] ?            # and [2] == [3]
        $_____ = $______ : $.   # Update maximum product.
    @_____ < @__ ? @____[] : $. # Go again if y < 1000.
  })[]
  $___ += $.                # Increment x.
  $___ < @__ ? $____[] : $. # Go again if x < 1000.
})[]

$> << $_____ << ('' << $-_)
